# No.89：ブロック単位生成・完全境界・構造監査・人可読命名・要約バイアス禁止 統合ルール（最新版）

---

## 0. 位置づけ（最上位・唯一適用）

1. 本ルール **No.89** は、最新版かつ最上位ルールとする。  
2. 過去のすべてのルール（No.88 以前を含む）は、本ルールにより **上書き・吸収・無効化** される。  
3. 本ルールに明記されていない旧ルール条項は **一切適用されない**。  

---

## 1. 最上位原則①：ブロック単位生成の必須化（絶対）

1. AI は **ブロック単位でのみ** コードを生成できる。  
2. ブロック化されていないコードは **生成物として不正** とみなす。  
3. 新規生成・修正・追加・差分・全文出力の **すべて** において本原則を例外なく適用する。  
4. ブロックとして定義できないコードは **生成してはならない**。  

---

## 2. ブロック定義（全ファイル共通）

### 2-1. ブロック境界（言語別コメント形式）

### JavaScript / PHP / CSS
```js
// ===== [UI] ナビゲーション - TOPバー =====
（コード本文）
// ===== [UI] ナビゲーション - TOPバー ここまで =====
```

### HTML
```html
<!-- ===== [UI] ナビゲーション - TOPバー ===== -->
（コード本文）
<!-- ===== [UI] ナビゲーション - TOPバー ここまで ===== -->
```

---

## 3. ブロック命名規則（人可読・強すぎない）

### 3-1. 基本フォーマット
```
[領域] 役割 - 対象（任意） #ID（任意）
```

### 3-2. ルール
- 角括弧 `[]` を使用する  
- 日本語使用可  
- **開始と終端のブロック名は完全一致**  
- ID は任意  

---

## 4. ブロック構造ルール

1. ブロックはファイル内の **連続した範囲** とする。  
2. 入れ子は **最大2段まで** 許可。  
3. 親子ブロックは **別名** とする。  
4. **1ブロック1責務** を厳守する。  

---

## 5. コード生成時の強制要件

1. 必ずブロックとして生成する。  
2. 単一行であっても **最小ブロックを付与** する。  
3. ブロック名を確定できない場合は **生成を中止** する。  

---

## 6. コード修正時の出力粒度

### 6-1. 全文指示がない場合
- 対象ブロックを **開始〜終端まで完全出力** する。  
- 抜粋・要約・再構成は **禁止**。  

### 6-2. 全文出力の場合
- **明示的な指示がある場合のみ許可**。  
- ブロック構造は **必ず保持** する。  

---

## 7. 省略・途中切れ禁止（絶対）

- ブロック開始〜終端が **必ず揃っていること**。  
- 省略記号・簡略表現・代替コメントは禁止。  
- 分割は **ブロック境界を跨いではならない**。  

---

## 8. 構造監査ログ（必須）

```
【構造監査ログ】
・対象ブロック名：○○
・開始コメント：確認済
・終端コメント：確認済
・ブロック名完全一致：確認済
・ブロック単位完結：確認済
・途中切断・省略：なし
```

---

## 9. ブロック不変宣言（編集時必須）

```
【ブロック不変宣言】
・本出力は対象ブロック以外に一切触れていない
・ブロック名および境界コメントは変更していない
```

---

## 10. ブロック外参照禁止

- 未出力ブロックを **前提にしてはならない**。  
- 推測・補完・過去文脈からの再構成は禁止。  
- 必要な場合は **別ブロックとして明示出力** する。  

---

## 11. 出力ブロック数制限

- 1回の出力は **最大3ブロックまで**。  
- 超過する場合は **継続確認を必須** とする。  

---

## 12. 禁足事項（違反即中止）

- 境界欠落  
- 途中終了  
- 無断全文出力  
- 監査ログ欠落  
- 不変宣言欠落  
- ブロック外参照  
- 簡略・再構成・要約  

---

## 13. 最上位原則②：要約バイアス禁止（新設・絶対）

1. 以下の場合、**要約・簡略・置換・代替表現を一切行ってはならない**。  
   - 「全文」「全文再提示」「省略禁止」と明示されている場合  
   - 法令・規約・免責事項・注意書き  
   - 長文であっても「共通」「定型」と明示されている文書  
   - 添付ファイルを正本として扱う場合  

2. 以下の行為は **明確な違反** とする：  
   - 「本文は正本どおり」等の **コメント置換による省略**  
   - 長文ブロックを説明文・要約文で代替する行為  
   - 「内容は変更していない」という **自己申告型省略**  

3. 要約・省略が必要だと判断した場合は、  
   **生成を行わず、理由を説明して中止すること。**

---

## 14. 添付ファイル最優先原則（新設・絶対）

1. **添付ファイルが提供された場合、必ず内容を確認し、それを最新版・唯一の正本として認識すること。**  
2. 過去のやり取り・記憶・推測・類推から **内容を補完・再構築してはならない**。  
3. 添付ファイルの内容が長文であっても、  
   **全文をそのまま扱うことを最優先** とする。  
4. 添付ファイルを確認せずに生成した場合、その出力は **不正生成** とみなす。  

---

## 15. 運用宣言

- すべてのコードは **ブロック単位** で扱う。  
- 境界なしコードは **不正**。  
- 構造監査ログと不変宣言により **違反を検知** する。  
- 要約バイアスが発生しそうな場合は **生成より中止を優先** する。  

---
