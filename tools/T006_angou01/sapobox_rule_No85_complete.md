\# No.85：完全統合版 ルール文書  

（No.77 / No.78 / No.78-A / No.78-B / No.80 / 行数監査 / トリミング防止 / CORS相談 含む）



これは「サポ箱（Support Tool Box）」の

\*\*すべてのコード生成・修正作業に適用する強制ルールの正式版\*\* です。



以後、あらゆるファイル生成・修正はこの No.85 を絶対遵守する。



---



\## 第1章：不変の原則（唯一の正本・改変禁止）



1\. ユーザーが提示した最新版ファイルのみを唯一の正本として扱う。  

2\. 記憶・推測・推論で補完しない。  

3\. 依頼された修正箇所以外は一切変更しない。  

4\. インデント・空白・記号・順序を含め、完全一致を保持する。  

5\. include 化・構造変更・ファイル分割はユーザー明示指示なしに禁止。  

6\. HTML 内に PHP を埋め込むことは禁止。



---



\## 第2章：コード完全出力・省略ゼロ



1\. 省略記号（…）禁止。  

2\. 「途中で切れている」「不足している」状態での出力禁止。  

3\. 必ず全タグ・全関数・全コードを閉じて出力する。  

4\. ナビバー・ヘッダー・フッター・CSS・JS など重要要素は絶対に省略しない。  

5\. コピー＆ペーストで即動作する完全実行可能コードのみ許可。



---



\## 第3章：行数・文字数・整合性監査（Windowsメモ帳準拠）



1\. 生成前：  

&nbsp;  - 行数（Notepad方式）  

&nbsp;  - 文字数（改行除外カウント）  

&nbsp;  を宣言する。



2\. 生成後：  

&nbsp;  - 行数・文字数を再宣言。  

&nbsp;  - \*\*1割以上減少していたら理由説明必須\*\*。  

&nbsp;  - 意図した簡略でない場合は再出力を行う。



3\. 改行コード（CRLF/LF）・末尾空行・文字化けの内部チェックを行う。



4\. 出力末尾に「行数監査ログ」を必ず付ける。



---



\## 第4章：二段階出力方式（完全版 → 変更点サマリ）



1\. 出力は \*\*完全版コード → 変更点一覧（差分サマリ）\*\* の順に行う。  

2\. 「修正部分のみ」の出力は、ユーザーから許可があった場合のみ可能。  

3\. 差分サマリには、変更行番号・変更内容の要約を明示する。



---



\## 第5章：法令系リンク保持ルール



1\. 利用規約・プライバシーポリシー・お問い合わせ等の法令リンクを絶対に削除しない。  

2\. 出力対象ファイル内で消えていた場合は出力を保留し、  

&nbsp;  「復元パッチ」を提示してから修正へ進む。



---



\## 第6章：CORSリスク事前相談



1\. ローカル動作前提ツールで CORS 違反が起こる可能性がある場合、  

&nbsp;  \*\*必ず生成前に相談する\*\*。  

2\. ローカル読み込み・相対パスを優先し、安全実装を選択する。



---



\## 第7章：省略恐怖プリフライト



出力直前に以下を内部チェックする：



\- 省略が起きていないか？  

\- ゴールの構造と一致しているか？  

\- テンプレートと破綻が起きていないか？  

\- 依頼部分以外に差分がないか？  



違和感が少しでもあれば出力を保留し、修正する。



---



\## 第8章：ファイル単位厳守



1\. 修正はユーザーが指定した \*\*対象ファイルのみ\*\*。  

2\. 指定外ファイルに変更は禁止。  

3\. 保護のため必要に応じて  



